"use strict";(self.webpackChunkstarlake=self.webpackChunkstarlake||[]).push([[1539],{33380:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=t(74848),a=t(28453),o=t(11470),s=t(19365);const i={},l="Create a project",c={id:"guides/bootstrap",title:"Create a project",description:"Select a project template",source:"@site/versioned_docs/version-1.2.0/0300-guides/050-bootstrap.mdx",sourceDirName:"0300-guides",slug:"/guides/bootstrap",permalink:"/starlake/docs/guides/bootstrap",draft:!1,unlisted:!1,editUrl:"https://github.com/starlake-ai/starlake/edit/master/docs/versioned_docs/version-1.2.0/0300-guides/050-bootstrap.mdx",tags:[],version:"1.2.0",sidebarPosition:50,frontMatter:{},sidebar:"starlakeSidebar",previous:{title:"Guides",permalink:"/starlake/docs/category/guides"},next:{title:"Extract",permalink:"/starlake/docs/category/extract"}},d={},u=[{value:"Select a project template",id:"select-a-project-template",level:2},{value:"Configure your datawarehouse connection",id:"configure-your-datawarehouse-connection",level:2},{value:"Next steps",id:"next-steps",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"create-a-project",children:"Create a project"}),"\n","\n",(0,r.jsx)(n.h2,{id:"select-a-project-template",children:"Select a project template"}),"\n",(0,r.jsx)(n.p,{children:"To create a new project, you need first to create an empty folder and run the\nstarlake bootstrap CLI command from there:"}),"\n",(0,r.jsxs)(o.A,{groupId:"platforms",children:[(0,r.jsx)(s.A,{value:"linux_macos",label:"Linux/MacOS",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ mkdir $HOME/userguide\n$ cd $HOME/userguide\n$ starlake bootstrap\n"})})}),(0,r.jsx)(s.A,{value:"windows",label:"Windows",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"c:\\> mkdir c:\\userguide\nc:\\> cd c:\\userguide\nc:\\> starlake bootstrap\n"})})}),(0,r.jsx)(s.A,{value:"docker",label:"Docker",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ mkdir $HOME/userguide\n$ cd $HOME/userguide\n$ docker run  -v `pwd`:/app/userguide -e SL_ROOT=/app/userguide -it starlake bootstrap\n"})})})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"By default, the project will be created in the current working directory.\nTo bootstrap the project in a different folder set SL_ROOT env variable to that folder:"})}),"\n",(0,r.jsxs)(o.A,{groupId:"platforms",children:[(0,r.jsx)(s.A,{value:"linux_macos",label:"Linux/MacOS",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ SL_ROOT=/my/other/location starlake bootstrap\n"})})}),(0,r.jsx)(s.A,{value:"windows",label:"Windows",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"c:\\> set SL_ROOT=c:\\my\\other\\location\nc:\\> starlake bootstrap\n"})})}),(0,r.jsxs)(s.A,{value:"docker",label:"Docker",children:[(0,r.jsx)(n.p,{children:"You are always required to set the SL_ROOT env var when using Docker"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ mkdir $HOME/userguide\n$ cd $HOME/userguide\n$ docker run  -v `pwd`:/app/userguide -e SL_ROOT=/app/userguide -it starlake bootstrap\n"})})]})]}),"\n",(0,r.jsx)(n.p,{children:"starlake will then create a default project hierarchy that allow you to start to extract, load, transform your data and orchestrate you pipelines."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",metastring:"{2,5,7,8,9,10}",children:".\n\u251c\u2500\u2500 metadata\n\u2502   \u251c\u2500\u2500 application.sl.yml      # project configuration\n\u2502   \u251c\u2500\u2500 env.sl.yml              # variables used in the project with their default values\n\u2502   \u251c\u2500\u2500 env.BQ.sl.yml           # variables overriden for a BigQuery connection\n\u2502   \u251c\u2500\u2500 env.DUCKDB.sl.yml       # variables overriden for a DuckDB connection\n\u2502   \u251c\u2500\u2500 expectations\n\u2502   \u2502   \u2514\u2500\u2500 default.sl.yml      # expectations macros\n\u2502   \u251c\u2500\u2500 extract\n\u2502   \u251c\u2500\u2500 load\n\u2502   \u251c\u2500\u2500 transform\n\u2502   \u251c\u2500\u2500 types\n\u2502   \u2502   \u251c\u2500\u2500 default.sl.yml      # types mapping\n\u2514\u2500\u2500 incoming                    # sample incoming data for this user guide\n    \u251c\u2500\u2500 starbake\n    \u2502   \u251c\u2500\u2500 order_202403011414.json\n    \u2502   \u251c\u2500\u2500 order_line_202403011415.csv\n    \u2514\u2500\u2500 \u2514\u2500\u2500 product.xml\n\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"incoming"})," folder host all the files you will want to load into your warehouse."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"metadata"})," folder contains the ",(0,r.jsx)(n.strong,{children:"extract"}),", ",(0,r.jsx)(n.strong,{children:"load"})," and ",(0,r.jsx)(n.strong,{children:"transform"})," configuration files"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"expectations"})," folder contains the expectations configuration files used for validating the data loaded / transformed in your warehouse"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configure-your-datawarehouse-connection",children:"Configure your datawarehouse connection"}),"\n",(0,r.jsxs)(n.p,{children:["The project configuration is stored in the ",(0,r.jsx)(n.code,{children:"metadata/application.sl.yml"})," file. This file contains the project version and the list of connections to the different data sinks."]}),"\n",(0,r.jsx)(n.p,{children:"This application configuration file contains multiple connections:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each connection is a sink where data can be loaded/transformed"}),"\n",(0,r.jsxs)(n.li,{children:["The active connection to use for loading/transforming data is specified in the ",(0,r.jsx)(n.code,{children:"connectionRef"})," property of the application section"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"connectionRef"})," property can be set to any of the connection names defined in the ",(0,r.jsx)(n.code,{children:"connections"})," section."]}),"\n",(0,r.jsxs)(n.li,{children:["We use environment variables to override the default values of the project configuration. The example below set the active connectionRef using the ",(0,r.jsx)(n.code,{children:"activeConnection"}),"variable.\nThis allows us to run our project on different datawarehouses (DEV / QA / PROD) without the need to update the project configuration."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'{title="metadata/application.sl.yml" }',children:'\n---\napplication:\n  connectionRef: "{{activeConnection}}"\n\n  audit:\n    sink:\n      connectionRef: "{{activeConnection}}"\n\n  connections:\n    sparkLocal:\n      type: "fs" # Connection to local file system (delta files)\n    duckdb:\n      type: "jdbc" # Connection to DuckDB\n      options:\n        url: "jdbc:duckdb:{{SL_ROOT}}/datasets/duckdb.db" # Location of the DuckDB database\n        driver: "org.duckdb.DuckDBDriver"\n    bigquery:\n      type: "bigquery"\n      options:\n        location: europe-west1\n        authType: "APPLICATION_DEFAULT"\n        authScopes: "https://www.googleapis.com/auth/cloud-platform"\n        writeMethod: "direct"\n\n\n\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The files ",(0,r.jsx)(n.code,{children:"env.DUCKDB.sl.yml"})," and ",(0,r.jsx)(n.code,{children:"env.BQ.sl.yml"})," are used to override the default values of the project configuration for the DuckDB and BigQuery connections.\nWe then only need to define the SL_ENV environment variable to switch between the different environments."]}),"\n",(0,r.jsx)(n.p,{children:"To switch to the DuckDB connection, we can run the following command:"}),"\n",(0,r.jsxs)(o.A,{groupId:"platforms",children:[(0,r.jsx)(s.A,{value:"linux_macos",label:"Linux/MacOS",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ SL_ENV=DUCKDB starlake <command>>\n"})})}),(0,r.jsx)(s.A,{value:"windows",label:"Windows",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"c:> SET SL_ENV=DUCKDB\nc:> starlake <command>>\n"})})}),(0,r.jsx)(s.A,{value:"docker",label:"Docker",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ docker run    -v `pwd`:/app/userguide \\\n                -e SL_ROOT=/app/userguide \\\n                -e SL_ENV=DUCKDB \\\n                -it starlake <command>\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsxs)(n.p,{children:["That's it, we are ready to go. Let's start by ",(0,r.jsx)(n.a,{href:"load/tutorial",children:"loading some data"})," into our warehouse and then ",(0,r.jsx)(n.a,{href:"transform/tutorial",children:"transforming it"})," to make it ready for analysis."]}),"\n",(0,r.jsx)(n.p,{children:"In this tutorial,"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"extract data from a database and then load the data into your favorite datawarehouse."}),"\n",(0,r.jsx)(n.li,{children:"Run transformations from the command line and from Airflow"}),"\n",(0,r.jsx)(n.li,{children:"Generate the documentation for the project"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["We will use the ",(0,r.jsx)(n.a,{href:"https://github.com/starlake-ai/StarBake/",children:"Starbake"})," project, a simple Github project that allows us to create fake data inside a database for our tutorial."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(76457).A+"",width:"436",height:"414"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var r=t(18215);const a={tabItem:"tabItem_Ymn6"};var o=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,s),hidden:t,children:n})}},11470:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(96540),a=t(18215),o=t(23104),s=t(56347),i=t(205),l=t(57485),c=t(31682),d=t(70679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=h(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o}))),[c,u]=f({queryString:t,groupId:a}),[m,x]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,d.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),b=(()=>{const e=c??m;return p({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),x(e)}),[u,x,o]),tabValues:o}}var x=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(74848);function g(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),a=i[t].value;a!==r&&(c(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:u,onClick:d,...o,className:(0,a.A)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function y(e){const n=m(e);return(0,j.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,j.jsx)(g,{...n,...e}),(0,j.jsx)(v,{...n,...e})]})}function k(e){const n=(0,x.A)();return(0,j.jsx)(y,{...e,children:u(e.children)},String(n))}},76457:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/starbake-89b49be7f0975743bf6b2d34321e27b9.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(96540);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);