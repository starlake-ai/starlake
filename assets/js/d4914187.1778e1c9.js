"use strict";(self.webpackChunkstarlake=self.webpackChunkstarlake||[]).push([[5501],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),m=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=m(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=m(r),f=a,d=c["".concat(l,".").concat(f)]||c[f]||p[f]||s;return r?n.createElement(d,o(o({ref:t},u),{},{components:r})):n.createElement(d,o({ref:t},u))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=f;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var m=2;m<s;m++)o[m]=r[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},49203:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>m});var n=r(87462),a=(r(67294),r(3905));const s={},o="SQL Transforms",i={unversionedId:"guides/transform/sql",id:"guides/transform/sql",title:"SQL Transforms",description:"SQL transform are SELECT statements materialized using a user defined strategy.",source:"@site/docs/0300-guides/300-transform/110-sql.mdx",sourceDirName:"0300-guides/300-transform",slug:"/guides/transform/sql",permalink:"/starlake/docs/next/guides/transform/sql",draft:!1,editUrl:"https://github.com/starlake-ai/starlake/edit/master/docs/docs/0300-guides/300-transform/110-sql.mdx",tags:[],version:"current",sidebarPosition:110,frontMatter:{},sidebar:"starlakeSidebar",previous:{title:"Configuration",permalink:"/starlake/docs/next/guides/transform/config"},next:{title:"Python Transforms",permalink:"/starlake/docs/next/guides/transform/python"}},l={},m=[{value:"Custom write strategy",id:"custom-write-strategy",level:2}],u={toc:m},c="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sql-transforms"},"SQL Transforms"),(0,a.kt)("p",null,"SQL transform are SELECT statements materialized using a user defined strategy.\nThe result of the SELECT statement is then used to populate the target table by applying the write strategy defined in the corresponding YAML configuration file.\nThe SELECT statement can be as simple or as complex as needed."),(0,a.kt)("p",null,"The only requirement is that the result of the SELECT statement must match the schema of the target table if ti exists, otherwise starlake will infer the schema."),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"*")," character is not allowed in the SELECT statement.")),(0,a.kt)("h2",{id:"custom-write-strategy"},"Custom write strategy"),(0,a.kt)("p",null,"If none of the ",(0,a.kt)("a",{parentName:"p",href:"../load/write-strategies"},"predefined write strategies")," fits your need, you can write your own update/insert/merge statements directly in the SQL file\ninstead of letting starlake convert your select statements into update/insert/merge statements."),(0,a.kt)("p",null,"But in that case, you will need to set the ",(0,a.kt)("inlineCode",{parentName:"p"},"parseSQL")," (",(0,a.kt)("inlineCode",{parentName:"p"},"true")," by default) to ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," in the YAML configuration file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="metadata/transform/<domain>/<table>.sl.yml"',title:'"metadata/transform/<domain>/<table>.sl.yml"'},"\ntask:\n  ...\n  parseSQL: false\n  ...\n\n")))}p.isMDXComponent=!0}}]);