"use strict";(self.webpackChunkstarlake=self.webpackChunkstarlake||[]).push([[8629],{99257:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>n,metadata:()=>d,toc:()=>l});var s=a(74848),i=a(28453);const n={},r="Load strategies",d={id:"guides/load/load-strategies",title:"Load strategies",description:"Standard strategies",source:"@site/docs/0300-guides/200-load/155-load-strategies.mdx",sourceDirName:"0300-guides/200-load",slug:"/guides/load/load-strategies",permalink:"/starlake/docs/next/guides/load/load-strategies",draft:!1,unlisted:!1,editUrl:"https://github.com/starlake-ai/starlake/edit/master/docs/docs/0300-guides/200-load/155-load-strategies.mdx",tags:[],version:"current",sidebarPosition:155,frontMatter:{},sidebar:"starlakeSidebar",previous:{title:"Load fixed width files",permalink:"/starlake/docs/next/guides/load/position"},next:{title:"Write strategies",permalink:"/starlake/docs/next/guides/load/write-strategies"}},o={},l=[{value:"Standard strategies",id:"standard-strategies",level:2},{value:"Custom Strategies",id:"custom-strategies",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"load-strategies",children:"Load strategies"}),"\n",(0,s.jsx)(t.h2,{id:"standard-strategies",children:"Standard strategies"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"starlake"})," load  will look for each domain and table, the files that match the pattern specified in\nthe ",(0,s.jsx)(t.code,{children:"table.pattern"})," attribute of the ",(0,s.jsx)(t.code,{children:"metadata/load/<domain>/<table>.sl.yml"})," file in the directory specified in the ",(0,s.jsx)(t.code,{children:"load.metadata.directory"}),"\nattribute of the same file or, if not specified, from the ",(0,s.jsx)(t.code,{children:"<domain>/_config.sl.yml"})," file."]}),"\n",(0,s.jsx)(t.p,{children:"starlake comes with two load strategies:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Load Strategy"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ai.starlake.job.load.IngestionTimeStrategy"})}),(0,s.jsx)(t.td,{children:"Load the files in a chronological order based on the file last modification time. This is the default."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ai.starlake.job.load.IngestionNameStrategy"})}),(0,s.jsx)(t.td,{children:"Load the files in a lexicographical order based on the file name."})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["To use a load strategy, you need to specify the ",(0,s.jsx)(t.code,{children:"loadStrategyClass"})," attribute in the ",(0,s.jsx)(t.code,{children:"metadata/application.sl.yml"})," file."]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:'title="metadata/application.sl.yml: to switch from a time based load to a name based load"',children:"application:\n  ...\n  loadStrategyClass: ai.starlake.job.load.IngestionNameStrategy\n  ...\n"})}),"\n",(0,s.jsx)(t.h2,{id:"custom-strategies",children:"Custom Strategies"}),"\n",(0,s.jsxs)(t.p,{children:["You can define your own load strategy by implementing the ",(0,s.jsx)(t.code,{children:"ai.starlake.job.load.LoadStrategy"})," interface."]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-scala",metastring:'title="src/main/scala/my/own//CustomLoadStrategy.scala"',children:'object CustomLoadStrategy extends LoadStrategy with StrictLogging {\n\n  def list(\n    storageHandler: StorageHandler,\n    path: Path,\n    extension: String = "",\n    since: LocalDateTime = LocalDateTime.MIN,\n    recursive: Boolean\n  ): List[FileInfo] = ???\n}\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",metastring:'title="metadata/application.sl.yml: to use a custom load strategy"',children:"\napplication:\n  ...\n  loadStrategyClass: ai.starlake.job.load.MyLoadStrategy\n  ...\n"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>d});var s=a(96540);const i={},n=s.createContext(i);function r(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);