"use strict";(self.webpackChunkstarlake=self.webpackChunkstarlake||[]).push([[7732],{22572:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var a=n(74848),s=n(28453);const i={},r="Load fixed width files",d={id:"guides/load/position",title:"Load fixed width files",description:"To load fixed width files, you need to know the width of each column.",source:"@site/docs/0300-guides/200-load/140-position.mdx",sourceDirName:"0300-guides/200-load",slug:"/guides/load/position",permalink:"/starlake/docs/next/guides/load/position",draft:!1,unlisted:!1,editUrl:"https://github.com/starlake-ai/starlake/edit/master/docs/docs/0300-guides/200-load/140-position.mdx",tags:[],version:"current",sidebarPosition:140,frontMatter:{},sidebar:"starlakeSidebar",previous:{title:"Load XML files",permalink:"/starlake/docs/next/guides/load/xml"},next:{title:"Load strategies",permalink:"/starlake/docs/next/guides/load/load-strategies"}},o={},l=[{value:"Infer schema",id:"infer-schema",level:2},{value:"Load data",id:"load-data",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"load-fixed-width-files",children:"Load fixed width files"}),"\n",(0,a.jsx)(t.p,{children:"To load fixed width files, you need to know the width of each column.\nThe example below is an example of how a fixed width file may be used to represent orders."}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-plaintext",children:"00001    62024-02-05T21:19:15.454ZCancelled\n00002    72024-02-05T21:19:15.454ZCancelled\n00003    82024-02-05T21:19:15.454ZDelivered\n"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(t.p,{children:"In the file above the columns are as follows:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"order_id: 5 characters"}),"\n",(0,a.jsx)(t.li,{children:"customer_id: 5 characters"}),"\n",(0,a.jsx)(t.li,{children:"timestamp: 24 characters"}),"\n",(0,a.jsx)(t.li,{children:"status: 10 characters"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"infer-schema",children:"Infer schema"}),"\n",(0,a.jsxs)(t.p,{children:["The width of each column is fixed, but the columns are not separated by a delimiter.\nWe just need to provide the ",(0,a.jsx)(t.code,{children:"infer-schema"})," command with a file that contains a single record where each field is placed on a separate line prefixed by its name followed by a colon."]}),"\n",(0,a.jsxs)(t.p,{children:["to infer the schema of the fixed width file above, we can submit the following file to the ",(0,a.jsx)(t.code,{children:"infer_schema"})," command:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-plaintext",children:"order_id:00001\ncustomer_id:    6\ntimestamp:2024-02-05T21:19:15.454Z\nstatus:Cancelled\n"})}),"\n",(0,a.jsx)(t.p,{children:"After calling the infer-schema command below, the schema will be inferred and printed to the console."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"$ starlake infer-schema -inputPath /my/path/fixed_width_file.txt --format FIXED --outputDir $SL_ROOT/metadata/load/starbake\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The schema will be saved in the directory specified by the ",(0,a.jsx)(t.code,{children:"outputDir"})," parameter.\nThe starlake YAML schema will look like the one below:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:"load:\n    metadata:\n      format: FIXED\n      writeStrategy:\n        type: APPEND\n    ...\n    attributes:\n      - name: order_id\n        type: string\n        position:  # first 5 characters\n          first: 0\n          last: 4\n      - name: customer_id\n        type: string\n        position: # next  5 characters\n          first: 5\n          last: 9\n      - name: timestamp\n        type: string\n        position: # next 24 characters\n          first: 10\n          last: 33\n      - name: status\n        type: string\n        position: # next 10 characters\n          first: 34\n          last: 43\n"})}),"\n",(0,a.jsx)(t.h2,{id:"load-data",children:"Load data"}),"\n",(0,a.jsxs)(t.p,{children:["After inferring the schema, we can use the ",(0,a.jsx)(t.code,{children:"load"})," command to load the data into the datawarehouse."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"$ starlake load\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>d});var a=n(96540);const s={},i=a.createContext(s);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);