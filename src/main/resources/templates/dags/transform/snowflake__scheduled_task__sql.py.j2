# This template executes individual SNOWFLAKE SQL jobs and requires the following dag generation options set:
#
# - stage_location: the location of the stage in snowflake where store procedures are located [REQUIRED]
# - warehouse(COMPUTE_WH): the warehouse to use for the DAG [OPTIONAL], default to COMPUTE_WH
# - timezone(UTC): the timezone to use for the schedule [OPTIONAL], default to UTC
# - packages(croniter,python-dateutil,snowflake-snowpark-python): a list of packages to install before running the task [OPTIONAL], default to croniter,python-dateutil,snowflake-snowpark-python
# - allow_overlapping_execution(False): whether to allow overlapping execution of the task [OPTIONAL], default to False
# - check_freshness(False): whether to check the freshness of the changes associated to the DAG [OPTIONAL], default to False
# - sl_env_var: starlake variables specified as a map in json format - at least the root project path SL_ROOT should be specified [OPTIONAL]
# - run_dependencies_first(False): whereas the dependencies should be added and executed before each transformation that has to be performed within the dag (if not set, the dependencies will not be added) [OPTIONAL]
# - tags: a list of tags to be applied to the dag [OPTIONAL]
# - retries(1): the number of retries to attempt before failing the task [OPTIONAL]
# - retry_delay(300): the delay between retries in seconds [OPTIONAL]
# - start_date: the start date of the dag (eg. 2022-01-01) [OPTIONAL]
# - optional_dataset_enabled(False): whether a dataset can be treated as optional [OPTIONAL]
# - data_cycle_enabled(False): whether the data cycle feature is enabled or not [OPTIONAL]
# - data_cycle: the data cycle to be used for the dag [OPTIONAL]
# - beyond_data_cycle_enabled(True): whether the beyond data cycle feature is enabled or not [OPTIONAL]
# - min_timedelta_between_runs(900): the minimum time delta in seconds between two consecutive runs [OPTIONAL], default to 15 minutes
#
{% include 'templates/dags/__starlake_snowflake_orchestrator.py' %}
{% include 'templates/dags/__starlake_sql_execution.py' %}
{% include 'templates/dags/transform/__scheduled_task_tpl.py.j2' %}
